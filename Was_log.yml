---
- name: was log
  hosts: wasa
  gather_facts: false
  ignore_errors: true
  tasks:
  - name: mkdir Was-a
    file:
      path: /S3/Was-a
      state: directory
      owner: ec2-user
      group: ec2-user
      mode: 0644
  
  - name: access log
    copy:
      src: '/home/ec2-user/apache-tomcat-9.0.54/logs/catalina.2021*'
      dest: '/S3/Was-a/catalina.out'
      remote_src: yes

- name: was log
  hosts: wasc
  gather_facts: false
  ignore_errors: true
  tasks:
  - name: mkdir Was-c
    file:
      path: /S3/Was-c
      state: directory
      owner: ec2-user
      group: ec2-user
      mode: 0644
  
  - name: access log
    copy:
      src: '/home/ec2-user/apache-tomcat-9.0.54/logs/catalina.2021*'
      dest: '/S3/Was-c/catalina.out'
      remote_src: yes